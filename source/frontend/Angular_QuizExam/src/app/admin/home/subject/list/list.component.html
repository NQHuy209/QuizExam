<div class="content-wrapper" [ngClass]="{'content-wrapper-collapsed': subjectComponent.home.isSidebarCollapsed}">
    <h4>Subject</h4>
    <hr class="line">

    
    <!-- Bottom Actions (Create and Export) -->
    <div class="bottom-actions">
        <div>
            <a class="btn btn-primary button-create create">Create</a>
        </div>
        <div>
            <a (click)="exportExcel()" class="btn btn-primary button-excel" style="margin-right: 5px;"><span
                    class="mdi mdi-file-excel icon"></span>Export Excel</a>
            <a (click)="exportPDF()" class="btn btn-primary button-pdf"><span class="mdi mdi-file-pdf icon"></span>Export PDF</a>
        </div>
    </div>
    <div class="sem-container">
        <a class="btn btn-outline-light" [ngClass]="{'active': selectedSem === 1}" (click)="selectSem(1)">Sem 1</a>
        <a class="btn btn-outline-light" [ngClass]="{'active': selectedSem === 2}" (click)="selectSem(2)">Sem 2</a>
        <a class="btn btn-outline-light" [ngClass]="{'active': selectedSem === 3}" (click)="selectSem(3)">Sem 3</a>
        <a class="btn btn-outline-light" [ngClass]="{'active': selectedSem === 4}" (click)="selectSem(4)">Sem 4</a>
    </div>
    <table class="table" id="example">
        <thead>
            <tr>
                <th>STT</th>
                <th>Subject</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<div *ngIf="isPopupCreate" class="modal-backdrop" (click)="closePopup($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <span>Create Subject</span>
            <span class="close-icon" (click)="closePopup()">&times;</span>
        </div>
        <div class="modal-body">
            <form method="post" (ngSubmit)="createSubject()" class="form-create">
                <div class="form-group">
                    <label for="semId" class="text-popup">SEM:</label>
                    <select class="form-control" [(ngModel)]="semId" name="semId">
                        <option [value]="data.id" *ngFor="let data of sem">{{data.name}}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="name" class="text-popup">Name:</label>
                    <input type="text" class="form-control" [(ngModel)]="name" name="name"
                        placeholder="Enter Subject Name">
                </div>
                <div class="form-group">
                    <label for="img" class="text-popup">Image:</label>
                    <input type="file" class="form-control" (change)="onFileSelected($event)">   
                </div>

                <button type="submit" class="btn btn-primary button">Save</button>
            </form>
        </div>
    </div>
</div>

<div *ngIf="isPopupUpdate" class="modal-backdrop" (click)="closePopup($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <span>Update Subject</span>
            <span class="close-icon" (click)="closePopup()">&times;</span>
        </div>
        <div class="modal-body">
            <form (ngSubmit)="updateSubject()" class="form-create">
                <div class="form-group">
                    <label for="semId" class="text-popup">SEM:</label>
                    <select class="form-control" [(ngModel)]="subjectDetail.sem.id" name="semId">
                        <!-- <option value=1>Sem 1</option>
                        <option value=2>Sem 2</option>
                        <option value=3>Sem 3</option>
                        <option value=4>Sem 4</option> -->
                        <option [value]="data.id" *ngFor="let data of sem">{{data.name}}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="name" class="text-popup">Name:</label>
                    <input type="text" class="form-control" [(ngModel)]="subjectDetail.name" name="name"
                        placeholder="Enter Subject Name">
                </div>
                <div class="form-group">
                    <label for="img" class="text-popup">Image:</label>
                    <img *ngIf="subjectDetail.image" [src]="'../../../../../../img-subject/' + subjectDetail.image" alt="Subject Image" style="max-width: 100%; height: auto;">
                    <input type="file" class="form-control" [(ngModel)]="subjectDetail.image" (change)="onFileSelected($event)">
                </div>

                <button type="submit" class="btn btn-primary button">Save</button>
                <span class="mdi mdi-delete-forever icon-action delete-icon" style="font-size: 24px; float: right; cursor: pointer;" (click)="deleteSubject(subjectId)"></span>
            </form>
        </div>
    </div>
</div>