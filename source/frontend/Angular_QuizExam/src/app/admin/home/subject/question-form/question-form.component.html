<div class="content-wrapper">
    <h4>Add new Question</h4>
    <hr class="line">
    <form class="d-flex">
        <div id="question-forms">
            <div *ngFor="let question of questionForms; let i = index" class="question-form">
                <div class="form-row">
                    <div class="form-group-row col me-3">
                        <label for="subject">Subject:</label>
                        <select class="form-control" id="subject">
                            <option [value]="subject" *ngFor="let subject of subjects">{{ subject }}</option>
                        </select>
                    </div>
                    <div class="form-group-row col me-3">
                        <label for="chapter">Chapter:</label>
                        <select class="form-select" id="chapter">
                            <option [value]="chapter" *ngFor="let chapter of chapters">{{ chapter }}</option>
                        </select>
                    </div>
                    <div class="form-group-row col me-3">
                        <label for="level">Level:</label>
                        <select class="form-select" id="level">
                            <option [value]="level" *ngFor="let level of levels">{{ level }}</option>
                        </select>
                    </div>
                    <div class="form-group-row col me-0">
                        <label for="type">Type:</label>
                        <select class="form-select" [(ngModel)]="questionForms[i].type" name="questionType{{i}}" (change)="toggleAnswerType(i, $event)">
                            <option *ngFor="let type of types" [value]="type">{{ type }}</option>
                        </select>
                    </div>
                </div>

                <div class="form-group-row">
                    <label for="question">Question:</label>
                    <textarea class="form-control" rows="3" style="flex-grow: 1"></textarea>
                </div>

                <div class="form-group form-image">
                    <div class="img-preview mt-3 mb-3">
                        <input type="file" class="form-control-file" accept="image/*" (change)="previewImage($event, i)" />
                        <button *ngIf="!question.imageSelected" class="choose-file-btn" type="button">Choose file</button>
                        <img id="imagePreview{{i}}" src="#" alt="Image Preview" style="display:none;" />
                    </div>
                </div>

                <div class="form-group">
                    <div class="answers-container">
                        <div *ngFor="let answer of question.answers; let j = index" class="input-group mb-2">
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input [type]="answer.type" name="answerSelect{{i}}" />
                                </div>
                            </div>
                            <input type="text" [(ngModel)]="answer.text" name="answers{{i}}" class="form-control" />
                            <span class="remove-answer" (click)="removeAnswer(i, j)">X</span>
                        </div>
                    </div>
                </div>

                <div class="mt-3">
                    <button type="button" class="add-answer" (click)="addAnswer(i)"><span class="mdi mdi-plus icon-button"></span> Another choice</button>
                    <button type="button" class="remove-question" style="float: right;" (click)="removeQuestionForm(i)"><span class="mdi mdi-delete-forever icon-button"></span> Remove Question</button>
                </div>
            </div>
        </div>
        <div class="btn-action">
            <button type="button" class="mdi mdi-plus-circle-outline icon-action" title="Add Question" (click)="addQuestionForm()"></button>
            <button type="submit" class="mdi mdi-checkbox-marked-circle-outline icon-action" title="Save"></button>
            <button type="button" class="mdi mdi-close-circle-outline icon-action" title="Cancel"></button>
        </div>
    </form>
</div>